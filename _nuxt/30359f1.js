(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{321:function(t,e,n){"use strict";n.r(e);n(153),n(230),n(6),n(69),n(7),n(13),n(4),n(12),n(18),n(32);var r=n(0),o=n(322),l=n.n(o);function c(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,n)}return e}function d(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?c(Object(source),!0).forEach((function(e){Object(r.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):c(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}var f="# Titre\n##  Sous titre\n\nMon inspiration du jour...\n",h={props:{value:{type:Object,default:function(){return{title:null,description:null,text:null,slug:null}}}},data:function(){return{initialValue:this.value.text,CMS:{value:function(){return""},clearAutosavedValue:function(){}}}},computed:{titlePlaceholder:function(){return this.value.title?this.value.title:!this.value.title&&this.CMS&&this.CMS.value().split("\n").map((function(line){return line.replace(/[^0-9A-zÀ-ÿ /€$°(){}]/g,"")})).find((function(t){return t.trim()}))||"Sans Titre"},dirty:function(){return this.value.text!==this.initialValue}},watch:{"value.title":{handler:function(t){localStorage.setItem("".concat(this.storagePrefixKey(),"_title"),t)}},"value.description":{handler:function(t){localStorage.setItem("".concat(this.storagePrefixKey(),"_description"),t)}}},mounted:function(){if(this.CMS=new l.a({autoDownloadFontAwesome:!0,element:this.$refs.CMS,showIcons:["strikethrough","table","redo","heading","undo","heading-bigger","heading-smaller","heading-1","heading-2","heading-3","clean-block","horizontal-rule"],initialValue:this.value.text||f,placeholder:f,promptURLs:!0,sideBySideFullscreen:!1,autosave:{enabled:!0,uniqueId:this.value.slug||window.location.pathname.split("/").slice(-1)[0]}}),this.CMS.codemirror.on("change",function(){this.$emit("input",d(d({},this.value),{},{text:this.CMS.value()}))}.bind(this)),this.CMS.toggleSideBySide(),""===this.value.title){var input=this.$refs.titleInput;this.$nextTick((function(){input.focus(),input.select()}))}this.syncTitleAndDescription()},methods:{clearAutosavedValue:function(){this.CMS.clearAutosavedValue();for(var t=0,e=["title","description"];t<e.length;t++){var n=e[t];localStorage.removeItem("".concat(this.storagePrefixKey()).concat(n))}},storagePrefixKey:function(){return"smde_".concat(this.value.slug)},syncTitleAndDescription:function(){var t=localStorage.getItem("".concat(this.storagePrefixKey(),"_title"));t&&(this.value.title=t);var e=localStorage.getItem("".concat(this.storagePrefixKey(),"_description"));e&&(this.value.description=e)}}},v=n(33),component=Object(v.a)(h,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("b-form",[n("b-form-group",{attrs:{label:"Titre :","label-for":"title",description:t.dirty?"modifié":"non modifié"}},[n("b-input",{ref:"titleInput",attrs:{id:"title",value:t.value.title,name:"title",placeholder:t.titlePlaceholder},on:{input:function(e){return t.$emit("input",Object.assign({},t.value,{title:e}))}}})],1),t._v(" "),n("b-form-group",{attrs:{label:"Description :","label-for":"description"}},[n("b-form-textarea",{attrs:{id:"description",value:t.value.description,size:"sm",name:"description"},on:{input:function(e){return t.$emit("input",Object.assign({},t.value,{description:e}))}}})],1),t._v(" "),n("textarea",{ref:"CMS"}),t._v(" "),t._t("default")],2)}),[],!1,null,null,null);e.default=component.exports},323:function(t,e){},359:function(t,e,n){"use strict";n.r(e);n(51);var r=n(19),o={layout:"admin",components:{FrontmatterEditor:n(321).default},asyncData:function(t){return Object(r.a)(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.$content,e.next=3,n("blog",{deep:!1,text:!0}).only(["title","description","text","slug"]).sortBy("createdAt","desc").fetch({});case 3:return e.t0=e.sent,e.abrupt("return",{articles:e.t0});case 5:case"end":return e.stop()}}),e)})))()}},l=n(33),component=Object(l.a)(o,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("b-container",[n("b-row",[n("b-col",[n("h1",[t._v("Gestionnaire de contenu")])])],1),t._v(" "),n("b-row",{staticClass:"p-3"},[n("b-col",[n("b-button",{staticClass:"btn-admin",attrs:{to:{name:"admin-new"}}},[t._v("\n          Créer un nouvel article\n        ")])],1)],1),t._v(" "),n("b-row",t._l(t.articles,(function(article){return n("b-col",{key:article.title,staticClass:"col-lg-4 col-md-6 col-12"},[n("div",{staticStyle:{"box-shadow":"black 3px 3px 3px 1px",padding:"0 1em 1em 0",height:"100%","max-height":"300px",overflow:"hidden"}},[n("b-button",{staticClass:"btn-admin",staticStyle:{"margin-top":"-2px"},attrs:{variant:"link",to:{name:"admin-edit-slug",params:{slug:article.slug}}}},[t._v("\n            Éditer\n            "),n("i",{staticStyle:{float:"right",cursor:"pointer"}},[t._v("📝")])]),t._v(" "),n("h2",{staticStyle:{"font-family":"'Libre Baskerville', serif"}},[t._v("\n            "+t._s(article.title)+"\n          ")]),t._v(" "),n("p",{staticClass:"p-1",staticStyle:{"font-family":"'Crimson Pro', serif"}},[t._v("\n            "+t._s((article.description||article.text).substring(0,255))+"\n          ")])],1)])})),1)],1),t._v(" "),t._e()],1)}),[],!1,null,null,null);e.default=component.exports;installComponents(component,{FrontmatterEditor:n(321).default})}}]);